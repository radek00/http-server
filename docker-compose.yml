services:
  http-server:
    build: .
    image: scratch-server:latest
    container_name: http-server
    ports:
      - "7878:7878"
    environment:
      # Server configuration
      - THREADS=12
      - IP=0.0.0.0
      
      # Features (set to 'true' to enable)
      - SILENT=false
      - CORS=false
      - COMPRESSION=true
      
      # Authentication (uncomment and set to enable)
      - AUTH=username:password
      
      # TLS/SSL (uncomment and set certificate password)
      - CERT=keyStore.p12
      - CERT_PASS=testing
    
    volumes:
      # Mount local directory to serve and upload files (read-write)
      # Server always runs from /srv - control file location by mounting to /srv
      - ./public:/srv
      
      # Mount custom index directory (automatically uses /index/index.html if present)
      - ./public:/index:ro
      
      # Mount certificates if using TLS (uncomment if needed)
      - ./certs:/certs:ro
    
    restart: unless-stopped
    
    # Security options
    security_opt:
      - no-new-privileges:true
